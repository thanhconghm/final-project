let dictionary = [
  {
    "word": "crush",
    "definition": "Người mà bạn thầm thích hoặc yêu đơn phương.",
    "example": "Tao có crush mới trong lớp học thêm đó."
  },
  {
    "word": "chill",
    "definition": "Thư giãn, thoải mái, không căng thẳng.",
    "example": "Cuối tuần này đi chill không?"
  },
  {
    "word": "trendy",
    "definition": "Hợp thời, bắt trend.",
    "example": "Bộ đồ này trendy ghê!"
  },
  {
    "word": "tự nhiên như đúng rồi",
    "definition": "Làm điều gì đó rất tự tin dù không hợp lý.",
    "example": "Nó vào lớp ngồi bàn giáo viên, tự nhiên như đúng rồi."
  },
  {
    "word": "toang",
    "definition": "Hỏng rồi, thất bại rồi.",
    "example": "Đi muộn bị điểm danh, toang thật!"
  },
  {
    "word": "mlem mlem",
    "definition": "Chỉ hành động liếm môi, thường dùng khi thấy thứ gì đó ngon hay hấp dẫn.",
    "example": "Cái bánh này nhìn mlem mlem ghê."
  },
  {
    "word": "xỉu up xỉu down",
    "definition": "Quá ngạc nhiên hoặc sốc.",
    "example": "Nhìn bảng điểm mà xỉu up xỉu down."
  },
  {
    "word": "cute phô mai que",
    "definition": "Dễ thương một cách đáng yêu, ngọt ngào.",
    "example": "Con mèo đó cute phô mai que luôn!"
  },
  {
    "word": "dỗi",
    "definition": "Giận dỗi một cách dễ thương.",
    "example": "Không nhắn tin là dỗi đó nha!"
  },
  {
    "word": "quạo",
    "definition": "Tức giận, khó chịu.",
    "example": "Sáng nay bị kẹt xe quạo quá trời!"
  },
  {
    "word": "ảo ma Canada",
    "definition": "Chỉ điều gì đó kỳ lạ, khó tin.",
    "example": "Cái đề kiểm tra này ảo ma Canada thật sự."
  },
  {
    "word": "nghiệp quật",
    "definition": "Khi ai đó nhận lại hậu quả vì hành động của mình.",
    "example": "Chê người ta điểm thấp, giờ bị nghiệp quật rồi nha."
  },
  {
    "word": "bay màu",
    "definition": "Biến mất, mất tích, bị xóa.",
    "example": "Cái video đó bị bay màu rồi."
  },
  {
    "word": "flex",
    "definition": "Khoe khoang.",
    "example": "Nó vừa mua iPhone mới, lên mạng flex liền."
  },
  {
    "word": "xịn xò",
    "definition": "Chất lượng, sang chảnh.",
    "example": "Cái laptop này xịn xò dữ!"
  },
  {
    "word": "mặn mà",
    "definition": "Hài hước, có duyên.",
    "example": "Con nhỏ đó nói chuyện mặn mà ghê!"
  },
  {
    "word": "đu trend",
    "definition": "Theo trào lưu đang hot.",
    "example": "Tiktok này đu trend hơi bị nhanh."
  },
  {
    "word": "trầm cảm level max",
    "definition": "Cảm thấy rất buồn bã, thất vọng.",
    "example": "Điểm kiểm tra thấp, trầm cảm level max luôn."
  },
  {
    "word": "người chơi hệ",
    "definition": "Thuật ngữ hài hước chỉ sở thích, phong cách nào đó.",
    "example": "Tôi là người chơi hệ minimalism."
  },
  {
    "word": "chằm Zn",
    "definition": "Cách nói chơi chữ ám chỉ một người nghiêm túc, khó tính (chằm Zn = trầm zin = trầm tính).",
    "example": "Hôm nay ai làm gì mà chằm Zn dữ vậy?"
  },
  {
    "word": "say xỉn",
    "definition": "Say rượu.",
    "example": "Nó đi nhậu về say xỉn luôn."
  },
  {
    "word": "hông bé ơi",
    "definition": "Từ chối nhẹ nhàng.",
    "example": "Mượn tiền nữa hả? Hông bé ơi!"
  },
  {
    "word": "chán như con gián",
    "definition": "Rất buồn chán.",
    "example": "Ở nhà cả ngày, chán như con gián."
  },
  {
    "word": "gãy kèo",
    "definition": "Không thực hiện được kế hoạch đã định.",
    "example": "Tối nay định đi xem phim mà gãy kèo rồi."
  },
  {
    "word": "xin vía",
    "definition": "Xin vận may từ người khác.",
    "example": "Thi tốt nha, xin vía đậu bài với!"
  },
  {
    "word": "trùm cuối",
    "definition": "Người mạnh nhất, giỏi nhất trong nhóm.",
    "example": "Thi toán gặp trùm cuối lớp luôn."
  },
  {
    "word": "hết nước chấm",
    "definition": "Quá đỉnh, không có gì để chê.",
    "example": "Món này ngon hết nước chấm luôn!"
  },
  {
    "word": "mất hình",
    "definition": "Mất phong độ, mất hình tượng.",
    "example": "Ngủ gục trong lớp, mất hình rồi còn đâu!"
  },
  {
    "word": "tấu hài",
    "definition": "Hành động hài hước một cách vô tình hoặc cố ý.",
    "example": "Nó bước lên sân khấu tấu hài ngay lập tức."
  },
  {
    "word": "lươn lẹo",
    "definition": "Không trung thực, khéo léo tránh né trách nhiệm.",
    "example": "Làm sai mà toàn lươn lẹo không à."
  }
];

// function loadDataFromJSON() {
//   fetch('slang_dictionary.json')
//     .then(Response => Response.json())
//     .then(data => {
//       console.log(data)
//       dictionary = data;
//       renderData();
//     })
//     .catch(error => {
//       console.error('Lỗi khi tải dữ liệu từ slang_dictionary.json:', error);
//       dictionary = [];
//       renderData();
//     })
// }

    function renderData() {
      const container = document.querySelector('.word-list');
      container.innerHTML = '';

      dictionary.forEach((item, index) => {
        const wordItem = document.createElement('div');
        wordItem.classList.add('word-item');

        wordItem.innerHTML = `
          <strong>${item.word}</strong>
          <p class="definition">📖 ${item.definition}</p>
          <p class="example">💬 Ví dụ: "${item.example}"</p>
          <div class="actions">
            <button class="edit">✏️ Sửa</button>
            <button class="delete">🗑️ Xóa</button>
          </div>
        `;

        wordItem.querySelector('.edit').addEventListener('click', () => editWord(index));
        wordItem.querySelector('.delete').addEventListener('click', () => deleteWord(index));

        container.appendChild(wordItem);
      });
    }
    renderData();

    function editWord(index) {
      const item = dictionary[index];
      document.getElementById('wordInput').value = item.word;
      document.getElementById('definitionInput').value = item.definition;
      document.getElementById('exampleInput').value = item.example;
      document.getElementById('editIndex').value = index;
    }

    function deleteWord(index) {
      if (confirm("Bạn có chắc muốn xóa từ này?")) {
        dictionary.splice(index, 1);
        saveToLocalStorage();
        renderData();
      }
    }

    document.getElementById('wordForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const word = document.getElementById('wordInput').value.trim();
      const definition = document.getElementById('definitionInput').value.trim();
      const example = document.getElementById('exampleInput').value.trim();
      const editIndex = document.getElementById('editIndex').value;

      const newEntry = { word, definition, example };

      if (editIndex === '') {
        dictionary.push(newEntry);
      } else {
        dictionary[editIndex] = newEntry;
      }

      this.reset();
  document.getElementById('editIndex').value = '';
  renderData();
});

document.addEventListener("DOMContentLoaded", () => {
  const userDisplay = document.getElementById("usernameDisplay");
  const logoutBtn = document.getElementById("logoutBtn");

  // Simulate user login check (replace with real auth logic as needed)
  const currentUser = JSON.parse(localStorage.getItem("currentUser"));
  console.log(currentUser)
if (currentUser) {
  document.getElementById("usernameDisplay").textContent = `👋 Xin chào, ${currentUser.username}`;
  document.getElementById("logoutBtn").style.display = "inline-block";
} 
else {
  document.getElementById("usernameDisplay").textContent = "👤 Bạn chưa đăng nhập";
}


  // Logout button functionality
  logoutBtn.addEventListener("click", () => {
    if (confirm("Bạn có chắc muốn đăng xuất?")) {
      localStorage.removeItem("currentUser");
      location.href = "../page/login.html"; // redirect back to login
    }
  });
});

// window.addEventListener('DOMContentLoaded', () => {
//   loadDataFromJSON(); // Load từ slang_dictionary.json khi trang khởi động
// });